webpackJsonp([3],{"2MWT":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},"9en6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r);function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function r(n,i){try{var s=t[n](i),o=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})}}t.default={props:{value:{type:String},accept:{type:String,default:"*"},selectLabel:{type:String,default:"Select an image"},removeLabel:{type:String,default:"Remove"}},data:function(){return{imageUrl:"",progress:0,loading:!1,dialog:!1}},watch:{},mounted:function(){this.imageUrl=""},computed:{dialogHeight:function(){return this.$vuetify.breakpoint.height-100},color:function(){return["error","warning","success"][Math.floor(this.progress/40)]}},methods:{onPickFile:function(){this.$refs.image.click()},onFilePicked:function(e){var t=this;return i(n.a.mark(function a(){var r,i,s,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(r=e.target.files||e.dataTransfer.files)||!r[0]){a.next=12;break}if(!((i=r[0].name)&&i.lastIndexOf(".")<=0)){a.next=5;break}return a.abrupt("return");case 5:return(s=new FileReader).addEventListener("load",function(){t.imageUrl=s.result}),s.readAsDataURL(r[0]),a.next=10,t.upload(r[0]);case 10:o=a.sent,t.$emit("getPath",o);case 12:case"end":return a.stop()}},a,t)}))()},removeFile:function(){this.imageUrl="",this.progress=0,this.dialog=!1,this.$store.dispatch("message/responseMessage",{text:this.$t("remove_img_success")})},upload:function(e){var t=this;return i(n.a.mark(function a(){var r,i,s,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=new FormData,i={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){t.progress=Math.round(100*e.loaded/e.total),t.progress>=100&&(t.loading=!1)}},r.append("avatar",e),t.loading=!0,a.next=6,t.$store.dispatch("file/uploadImage",{formData:r,config:i});case 6:return s=a.sent,o=s.data,t.loading=!1,a.abrupt("return",o);case 10:case"end":return a.stop()}},a,t)}))()}}}},BL2l:function(e,t,a){var r=a("2MWT");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("28272be6",r,!0,{})},GuIv:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"input[type=file][data-v-b5d096be]{position:absolute;left:-99999px}.loading[data-v-b5d096be]{opacity:.4}",""])},XjV5:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"grey lighten-4",attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v(e._s(e.name))])]),e._v(" "),a("v-divider"),e._v(" "),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[e._v("Client Base Config")]),e._v(" "),a("span",{staticClass:"grey--text"},[e._v("客户端基本配置")])])]),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"客户端名称",rules:[function(){return!!e.formData.nuxt.name||"client is required!!"}],counter:32,required:""},model:{value:e.formData.nuxt.name,callback:function(t){e.$set(e.formData.nuxt,"name",t)},expression:"formData.nuxt.name"}}),e._v(" "),a("v-text-field",{attrs:{label:"客户端前缀",rules:[function(){return!!e.formData.nuxt.prefix||"prefix is required!!"}],counter:10,required:""},model:{value:e.formData.nuxt.prefix,callback:function(t){e.$set(e.formData.nuxt,"prefix",t)},expression:"formData.nuxt.prefix"}})],1),e._v(" "),a("v-divider",{staticClass:"mt-2"}),e._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[e._v("Banner")]),e._v(" "),a("span",{staticClass:"grey--text"},[e._v("设置在客户端显示的海报大图")])])]),e._v(" "),a("v-card-text",[a("v-select",{attrs:{clearable:"",label:"关联Banner","item-text":"title","item-value":"id",autocomplete:"",loading:e.loading,"cache-items":"",chips:"",multiple:"",items:e.banners,"search-input":e.search},on:{"update:searchInput":function(t){e.search=t}},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("v-chip",{key:JSON.stringify(t.item),staticClass:"chip--select-multi",attrs:{close:"",selected:t.selected,color:"main"===t.item.type?"primary":"secondary","text-color":"white"},on:{input:function(e){t.parent.selectItem(t.item)}}},[a("v-avatar",[a("img",{attrs:{src:t.item.avatar}})]),e._v("\n                            "+e._s(t.item.title)+"\n                        ")],1)]}},{key:"item",fn:function(t){return[a("v-list-tile-avatar",{attrs:{tile:""}},[a("img",{attrs:{src:t.item.avatar}})]),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.title)}})],1),e._v(" "),a("v-list-tile-action",[a("v-list-tile-action-text",[e._v("位置:"+e._s(t.item.type))])],1)]}}]),model:{value:e.formData.banner.id,callback:function(t){e.$set(e.formData.banner,"id",t)},expression:"formData.banner.id"}})],1),e._v(" "),a("v-divider",{staticClass:"mt-2"}),e._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[e._v("Recommend Catelog")]),e._v(" "),a("span",{staticClass:"grey--text"},[e._v("设置在客户端首页推荐的分类")])])]),e._v(" "),e.catelogsLoaded?a("v-card-text",[a("v-select",{attrs:{label:"文章分类",items:e.catelogs,"item-text":"name","item-value":"id",multiple:"","max-height":"400",hint:"请选择文章分类","persistent-hint":"",chips:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("v-chip",{key:JSON.stringify(t.item),staticClass:"chip--select-multi",attrs:{close:"",selected:t.selected},on:{input:function(e){t.parent.selectItem(t.item)}}},[e._v("\n                            "+e._s(t.item.name)+"\n                        ")])]}}]),model:{value:e.formData.catelogs,callback:function(t){e.$set(e.formData,"catelogs",t)},expression:"formData.catelogs"}})],1):e._e(),e._v(" "),a("v-divider",{staticClass:"mt-2"}),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:e.resetForm}},[e._v("Clear")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",disabled:!e.valid,flat:""},on:{click:e.submit}},[e._v("Submit")])],1)],1)],1)],1)},staticRenderFns:[]}},aoQU:function(e,t,a){var r=a("VU/8")(a("9en6"),a("j863"),!1,function(e){a("xt5C")},"data-v-b5d096be",null);e.exports=r.exports},j863:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-media",{directives:[{name:"show",rawName:"v-show",value:e.imageUrl,expression:"imageUrl"}],ref:"imageUrl",class:{loading:e.loading},staticStyle:{cursor:"pointer"},attrs:{contain:"",src:e.imageUrl,height:"200px"},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}}),e._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:0===e.progress,expression:"progress === 0"}],attrs:{large:"",block:"",raised:"",color:"info"},on:{click:e.onPickFile}},[e._v("\n            "+e._s(e.selectLabel)+"\n        ")]),e._v(" "),a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"my-0",attrs:{height:"40",color:e.color},model:{value:e.progress,callback:function(t){e.progress=t},expression:"progress"}}),e._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:100===e.progress,expression:"progress === 100"}],staticClass:"error",attrs:{large:"",block:"",raised:""},on:{click:e.removeFile}},[e._v("\n            "+e._s(e.removeLabel)+"\n        ")]),e._v(" "),a("input",{ref:"image",attrs:{type:"file",name:"image",accept:e.accept},on:{change:e.onFilePicked}})],1),e._v(" "),a("v-dialog",{attrs:{fullscreen:"","max-width":"100%",lazy:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{"full-height":""}},[a("v-card-title",[a("span",[e._v("图片预览")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.dialog=!1}}},[a("v-icon",[e._v("clear")])],1)],1),e._v(" "),a("v-card-media",{class:{loading:e.loading},attrs:{contain:"",src:e.imageUrl,height:e.dialogHeight}}),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(t){return t.stopPropagation(),e.removeFile(t)}}},[e._v("Delete")]),e._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){t.stopPropagation(),e.dialog=!1}}},[e._v("Close")])],1)],1)],1)],1)},staticRenderFns:[]}},mBED:function(e,t,a){var r=a("VU/8")(a("ne6u"),a("XjV5"),!1,function(e){a("BL2l")},"data-v-370965bb",null);e.exports=r.exports},ne6u:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),i=a("aoQU"),s=a.n(i);function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function r(n,i){try{var s=t[n](i),o=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})}}t.default={name:"nuxt_create",components:{UploadButton:s.a},data:function(){return{name:this.$t("nuxt_create"),bannerAvatarIsUrl:!0,search:null,loading:!1,catelogs:{},banners:[],formData:{nuxt:{name:"",prefix:""},banner:{id:null},catelogs:[]},valid:!0,catelogsLoaded:!1}},watch:{search:function(e){e&&this.querySelections(e)}},methods:{querySelections:function(e){var t=this;this.loading=!0,setTimeout(o(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r={search:"title:"+e,searchFields:"title:like"},a.next=3,t.fetchBanners(r);case 3:t.posts=a.sent,t.loading=!1;case 5:case"end":return a.stop()}},a,t)})),500)},fetchBanners:function(e){var t=this;return o(n.a.mark(function a(){var r,i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("banner/index",e);case 2:return r=a.sent,i=r.data,a.abrupt("return",i);case 5:case"end":return a.stop()}},a,t)}))()},getPath:function(e){console.log(e),this.formData.banner.avatar=e},resetForm:function(){this.errorMessages=[],this.formHasErrors=!1,this.$refs.form.reset()},submit:function(){var e=this;return o(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=5;break}return t.next=3,e.$store.dispatch("nuxt/store",{formData:e.formData});case 3:e.$store.dispatch("message/responseMessage",{text:e.$t("nuxt_create_success")}),e.$router.replace({name:"nuxt.index"});case 5:case"end":return t.stop()}},t,e)}))()},fetchCatelog:function(){var e=this;return o(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.next=3,e.$store.dispatch("catelog/index",a);case 3:r=t.sent,e.$set(e,"catelogs",r),e.catelogsLoaded=!0;case 6:case"end":return t.stop()}},t,e)}))()}},created:function(){var e=this;return o(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCatelog();case 2:return t.next=4,e.fetchBanners({});case 4:e.banners=t.sent;case 5:case"end":return t.stop()}},t,e)}))()}}},xt5C:function(e,t,a){var r=a("GuIv");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("11da7c18",r,!0,{})}});