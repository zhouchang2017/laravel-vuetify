webpackJsonp([4],{"7fND":function(t,e,a){(t.exports=a("UTlt")(!1)).push([t.i,"",""])},OiPw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),n=a.n(i),s=a("J0Oq"),o=a.n(s);e.default={name:"post_index",data:function(){return{dialog:!1,dialogInfo:{title:"",text:"",index:null,postId:null},loaded:!1,name:this.$t("post_list"),search:"",body:{},loading:!1,pagination:{sortBy:"updated_at",descending:"desc"},headers:[{text:"Avatar",align:"left",sortable:!1,value:"avatar",width:"200px"},{text:"Title",value:"title"},{text:"Read_num",value:"read_num"},{text:"Fake_read_num",value:"fake_read_num"},{text:"Is_hot",value:"is_hot"},{text:"Hidden",value:"hidden"},{text:this.$t("updated_at"),value:"updated_at"},{text:"Actions",value:"name",align:"right",sortable:!1}]}},watch:{pagination:{handler:function(){var t=this;return o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch();case 2:case"end":return e.stop()}},e,t)}))()},deep:!0}},methods:{isHot:function(t){var e=this,a=t.post_id,i=t.is_hot;return o()(n.a.mark(function t(){var s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("post/update",{post_id:a,props:{is_hot:i}});case 2:s=t.sent,console.log(s);case 4:case"end":return t.stop()}},t,e)}))()},isHidden:function(t){var e=this,a=t.post_id,i=t.hidden;return o()(n.a.mark(function t(){var s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("post/update",{post_id:a,props:{hidden:i}});case 2:s=t.sent,console.log(s);case 4:case"end":return t.stop()}},t,e)}))()},fetch:function(){var t=this;return o()(n.a.mark(function e(){var a,i,s,o,r,d,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.pagination,i=a.sortBy,s=a.descending,o=a.page,r=a.rowsPerPage,d={page:o},i&&(d.orderBy=i),s&&(d.sortedBy="desc"),r&&(d.limit=r),console.log(d),e.next=9,t.$store.dispatch("post/index",d);case 9:c=e.sent,t.$set(t,"body",c),t.loading=!1;case 12:case"end":return e.stop()}},e,t)}))()},editItem:function(t){this.$router.push({name:"post.edit",params:{id:t.id}})},deleteItem:function(t){this.dialog=!0,this.dialogInfo.title="Are you sure you want to delete this item?",this.dialogInfo.text="Post title => "+t.title,this.dialogInfo.index=this.body.data.indexOf(t),this.dialogInfo.postId=t.id},deleteOk:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("post/delete",{post_id:t.dialogInfo.postId});case 2:a=e.sent,t.dialog=!1,t.$store.dispatch("message/responseMessage",{text:a.message}),t.body.data.splice(t.dialogInfo.index,1),t.dialogInfo={title:"",text:"",index:null,postId:null};case 7:case"end":return e.stop()}},e,t)}))()}},created:function(){var t=this;return o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch();case 2:t.loaded=!0;case 3:case"end":return e.stop()}},e,t)}))()}}},c4wI:function(t,e,a){var i=a("Z0/y")(a("OiPw"),a("vE6d"),!1,function(t){a("foGW")},"data-v-4ca5fc07",null);t.exports=i.exports},foGW:function(t,e,a){var i=a("7fND");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("FIqI")("1b16cae8",i,!0,{})},vE6d:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-card-title",{staticClass:"grey lighten-4",attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(t.name))])]),t._v(" "),a("v-divider"),t._v(" "),t.loaded?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.body.data,search:t.search,pagination:t.pagination,"total-items":t.body.meta.total,loading:t.loading,"rows-per-page-items":[5,10,20,40]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-card",{staticClass:"mt-1 mb-1"},[a("v-card-media",{staticClass:"white--text",attrs:{flat:"",tile:"",contain:"",width:"200px",height:"100px",src:e.item.avatar}})],1)],1),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.title))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.read_num))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.fake_read_num))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[a("v-switch",{attrs:{color:"success","hide-details":""},on:{change:function(a){t.isHot({post_id:e.item.id,is_hot:e.item.is_hot})}},model:{value:e.item.is_hot,callback:function(a){t.$set(e.item,"is_hot",a)},expression:"props.item.is_hot"}})],1),t._v(" "),a("td",{staticClass:"text-xs-right"},[a("v-switch",{attrs:{color:"success","hide-details":""},on:{change:function(a){t.isHidden({post_id:e.item.id,hidden:e.item.hidden})}},model:{value:e.item.hidden,callback:function(a){t.$set(e.item,"hidden",a)},expression:"props.item.hidden"}})],1),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.updated_at))]),t._v(" "),a("td",{staticClass:"justify-center"},[a("div",{staticClass:"d-inline-flex"},[a("v-btn",{attrs:{icon:""},on:{click:function(a){t.editItem(e.item)}}},[a("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(a){t.deleteItem(e.item)}}},[a("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)])]}}])}):t._e(),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v(t._s(t.dialogInfo.title))]),t._v(" "),a("v-card-text",[t._v(t._s(t.dialogInfo.text)+"\n                    ")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("Disagree")]),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(e){return t.deleteOk(e)}}},[t._v("Agree")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}}});